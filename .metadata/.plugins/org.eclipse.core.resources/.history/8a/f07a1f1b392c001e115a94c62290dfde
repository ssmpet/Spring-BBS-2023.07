package com.ys.sbbs.db;

import java.util.List;

import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Select;

import com.ys.sbbs.entity.Board;

@Mapper
public interface BoardDaoMySQL {

	@Select("select count(bid) from board where isDeleted=0 AND #{field} LIKE %#{query}%")
	int getBoardCount(String field, String query);
	
	@Select("SELECT b.bid, b.uid, b.title, b.content, b.modTime, b.viewCount,"
				+ "	b.replyCount, b.files, u.uname "
				+ "	FROM board AS b JOIN users u ON b.uid = u.uid"
				+ "	WHERE b.bid=#{bid}")
	Board getBoard(int bid);
	
	List<Board> listBoard(String field, String query, int page);
	
	void insertBoard(Board board);
	
	void increaseViewCount(int bid);
	
	void increaseReplyCount(int bid);
	
	void updateBoard(Board board);
	
	void deleteBoard(int bid);
}
